# Aura Assistant — Project Clean Dump (v5.0.6 Entity Intelligence Update)
### Updated: 2025-10-13

---

## 1. Общее описание проекта

**Aura Assistant** — автономный голосовой и текстовый ИИ-ассистент, работающий на Linux-сервере без зависимости от облачных сервисов.  
Система объединяет функции управления задачами, списками, заметками, напоминаниями и обучающими элементами через **универсальную структуру данных (Entity System)**.  
Общение с пользователем происходит естественным языком — как голосом, так и текстом — через Telegram.

Основная идея: создать «живого» ассистента, который не просто выполняет команды, а **понимает смысл** сказанного и действует контекстно.  

---

## 2. Архитектура проекта

### Главные компоненты

| Компонент | Назначение |
|------------|------------|
| **main.py** | Центральный процесс приложения. Управляет Telegram-ботом, голосовым вводом, обращениями к LLM (OpenAI), и маршрутизацией команд. |
| **db.py** | Логика уровня данных (Entity System). Содержит универсальные функции для работы со списками, задачами, заметками и напоминаниями. |
| **migrate_to_entities.py** | Миграция старой базы (lists/tasks) в единую таблицу `entities`. |
| **start.sh / stop.sh** | Сервисные скрипты для запуска и остановки Aura. |
| **tmp/** | Временные аудиофайлы (`.ogg` → `.wav`) для распознавания речи. |
| **venv/** | Виртуальное окружение Python с зависимостями. |
| **aura.log / db_debug.log** | Основные журналы работы ассистента и отладки базы. |

---

## 3. Сервер и окружение

**Хостинг:** Hetzner (Германия)  
**IP:** 168.119.191.62  
**ОС:** Ubuntu 24.04.3 LTS (noble)  
**Ядро:** Linux 6.x  
**Python:** 3.12.x  
**Библиотеки:**
- `python-telegram-bot 21.4`
- `openai`
- `speech_recognition`
- `pydub`
- `dotenv`
- `sqlite3`

**Директория проекта:** `/opt/aura-assistant/`

**База данных:**  
`/opt/aura-assistant/db.sqlite3` — SQLite, автосоздание, UTF-8.

---

## 4. Entity System (ES Core)

Aura использует **единую таблицу `entities`** для всех типов информации.

| Поле | Назначение |
|------|-------------|
| `id` | Уникальный идентификатор записи |
| `user_id` | Telegram-ID пользователя |
| `type` | Тип сущности (`list`, `task`, `note`, `reminder`, `idea`) |
| `title` | Название или заголовок |
| `content` | Произвольный текст (описание, детали) |
| `parent_id` | Связь с родителем (`task` → `list`) |
| `meta` | JSON-поле (гибкие параметры: статус, приоритет, дедлайн и др.) |
| `created_at` | Метка времени создания |

---

## 5. Semantic Core Prompt (ИИ-мозг Aura)

Aura не использует жёсткие команды.  
Каждая пользовательская фраза обрабатывается через **Semantic Core Prompt**, который обучает модель “понимать смысл” и возвращать JSON-инструкции.

**Примеры действий:**
{ "action": "create", "entity_type": "list", "list": "Покупки" }
{ "action": "add_task", "entity_type": "task", "list": "Покупки", "task": "Хлеб" }
{ "action": "show_lists" }
{ "action": "show_tasks", "list": "Работа" }

yaml
Copy code

**Типы действий:**  
`create`, `add_task`, `show_lists`, `show_tasks`, `delete_task`, `mark_done`, `update`, `move`, `unknown`

---

## 6. Голосовой модуль

1. Telegram сохраняет `.ogg` в `/tmp/`
2. `pydub` → `.wav`
3. `speech_recognition` распознаёт русскую речь
4. Распознанный текст → `handle_text()`
5. Далее работает та же логика, что для текста.

---

## 7. Интеллектуальная память (Ebbinghaus Memory Engine)

**Задача:** помогать пользователю запоминать важную информацию и идеи.

Механика:  
- хранить отметки о прочтении/понимании;  
- повторять через интервалы `1 → 3 → 7 → 14 → 30 дней`;  
- использовать `meta` (`next_repeat`, `confidence`);  
- превращать заметки в “обучающие элементы”.

---

## 8. Возможности (v5.0.6)

✅ Создание списков и задач  
✅ Голосовое управление  
✅ Универсальная база `entities`  
✅ Многопользовательская поддержка  
✅ Автоматическое восстановление таблицы  
✅ Полное логирование  

---

## 9. Планы (v5.1–v6.0)

| Версия | Нововведение |
|---------|---------------|
| **v5.1** | Редактирование (`update_entity`), перенос (`move_entity`) |
| **v5.2** | Semantic Context Engine — контекстное понимание |
| **v5.3** | Поддержка типов `note`, `reminder`, `idea` |
| **v5.4** | Анализ внимания и активности |
| **v5.5** | Ebbinghaus Memory Engine |
| **v5.6** | Клиентская синхронизация (Android, Linux) |
| **v6.0** | Автономный ИИ-ассистент с самообучением |

---

## 10. Структура проекта

/opt/aura-assistant/
├── aura.log
├── db.py
├── main.py
├── migrate_to_entities.py
├── db.sqlite3
├── tmp/
├── venv/
├── start.sh
├── stop.sh
├── db_debug.log
└── project_docs/
└── aura_entity_system_blueprint.md

yaml
Copy code

---

## 11. Идея проекта

Aura — это не бот, а **цифровое существо**.  
Оно учится, адаптируется и помогает.  
Entity System даёт структуру, Semantic Prompt — смысл,  
Ebbinghaus Engine — память.

*Файл обновлён автоматически 2025-10-13. Версия: Aura v5.0.6 “Entity Intelligence Update”.*
